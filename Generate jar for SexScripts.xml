<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="build_sexscripts_test" name="Create jars for Mine">
    <!--this file was created by Eclipse Runnable JAR Export Wizard-->
    <!--ANT 1.7 is required                                        -->

    <target name="build_sexscripts_release">
        <property name="release_name" value="Mine Redux for SexScripts"/>
        <property name="version" value="${release_name} 1.0"/>
        <property name="destination" value="Releases/${version}"/>
        <antcall target="build"/>
    </target>

	<target name="build_sexscripts_test">
      <property name="destination" value="../../Extras"/>
      <antcall target="build"/>
    </target>

    <target name="syncImages">
    	<echo message = "Project root: ${basedir}"/>
    	<java classname="teaselib.core.crypto.CryptoSync">
    		<arg value="${basedir}/../mine-assets/assets/Mine/images/"/>
    		<arg value="${basedir}/../mine-assets/assets/Mine/encrypted images/"/>
    		<arg value="--flat"/>
    		<arg value="png"/>
    		<arg value="jpg"/>
			<classpath>
				<pathelement location="${basedir}/../teaselib//lib/TeaseLib.jar"/>
				<pathelement path="$(java.class.path}"/>
			</classpath>
    	</java>
	</target>

    <target name="syncMistress">
    	<java classname="teaselib.core.crypto.CryptoSync">
    		<arg value="${basedir}/../mine-assets/assets/Mine/mistress/"/>
    		<arg value="${basedir}/../mine-assets/assets/Mine/encrypted mistress/"/>
    		<arg value="--recursive"/>
    		<arg value="png"/>
    		<arg value="jpg"/>
    			<classpath>
    				<pathelement location="${basedir}/../teaselib//lib/TeaseLib.jar"/>
    				<pathelement path="$(java.class.path}"/>
    			</classpath>
    	</java>
	</target>

    <target name="build" depends="syncImages,syncMistress">
        <property name="rootFolder" value="SexScripts"/>
        <jar destfile="${destination}/${rootFolder}/scripts/Mine.jar">
            <manifest>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="bin"/>
            <fileset dir="../PCMPlayer/bin"/>
        </jar>
        <jar destfile="${destination}/${rootFolder}/scripts/Mine Scripts.zip">
            <manifest>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="assets" includes="Mine/scripts/**"/>
        </jar>
        <jar destfile="${destination}/${rootFolder}/scripts/Mine Resources.zip">
            <manifest>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="../mine-assets/assets" excludes="Mine/accessories/**,Mine/mistress/**,Mine/scripts/**"/>
        </jar>
        <jar destfile="${destination}/${rootFolder}/scripts/Mine Mistress.zip">
            <manifest>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="../mine-assets/assets" includes="Mine/mistress/**"/>
        </jar>
        <copy todir="${destination}/${rootFolder}/scripts/Mine/accessories/">
            <fileset dir="../mine-assets/assets/Mine/accessories/"/>
        </copy>
        <copy todir="${destination}/${rootFolder}/lib/TeaseLib">
            <fileset dir="../TeaseLib/lib/" excludes="**.pdb,**.exp,**.ilk,**.lib"/>
        </copy>
    	<copy file="src/Mine.groovy" tofile="${destination}/${rootFolder}/Scripts/Mine.groovy"/>
    </target>
</project>
