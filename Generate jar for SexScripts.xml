<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="build_sexscripts_debug" name="Create jars for Mine">
    <!--ANT 1.7 is required -->

    <target name="build_sexscripts_release">
        <property name="release_name" value="Mine Redux for SexScripts"/>
        <property name="version" value="1.01"/>
        <property name="destination" value="${basedir}/../Releases/${release_name} ${version}"/>
        <antcall target="build"/>
    </target>

	<target name="build_sexscripts_debug">
        <property name="destination" value="${basedir}/../"/>
        <property name="rootFolder" value="SexScripts"/>
        <antcall target="build"/>
        <copy file="assets/Mine/debug.txt" tofile="${destination}/${rootFolder}/scripts/Mine/debug.txt"/>
    </target>

    <target name="syncAccessories">
    	<java classname="teaselib.core.crypto.CryptoSync">
    		<arg value="${basedir}/../mine-assets/assets/Mine/accessories/"/>
    		<arg value="${basedir}/../mine-assets/assets/Mine/encrypted accessories/"/>
    		<arg value="--recursive"/>
    		<arg value="jpg"/>
			<classpath>
				<pathelement location="${basedir}/../teaselib/lib/TeaseLib.jar"/>
				<pathelement path="$(java.class.path}"/>
			</classpath>
    	</java>
	</target>

    <target name="syncImages">
    	<java classname="teaselib.core.crypto.CryptoSync">
    		<arg value="${basedir}/../mine-assets/assets/Mine/images/"/>
    		<arg value="${basedir}/../mine-assets/assets/Mine/encrypted images/"/>
    		<arg value="--flat"/>
    		<arg value="png"/>
    		<arg value="jpg"/>
			<classpath>
				<pathelement location="${basedir}/../teaselib/lib/TeaseLib.jar"/>
				<pathelement path="$(java.class.path}"/>
			</classpath>
    	</java>
	</target>

    <target name="syncMistress">
    	<java classname="teaselib.core.crypto.CryptoSync">
    		<arg value="${basedir}/../mine-assets/assets/Mine/mistress/"/>
    		<arg value="${basedir}/../mine-assets/assets/Mine/encrypted mistress/"/>
    		<arg value="--recursive"/>
    		<arg value="png"/>
    		<arg value="jpg"/>
    			<classpath>
    				<pathelement location="${basedir}/../teaselib//lib/TeaseLib.jar"/>
    				<pathelement path="$(java.class.path}"/>
    			</classpath>
    	</java>
	</target>

    <target name="build" depends="syncAccessories,syncImages,syncMistress">
        <property name="rootFolder" value="SexScripts"/>
        <jar destfile="${destination}/${rootFolder}/scripts/Mine.jar">
            <manifest>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="bin"/>
            <fileset dir="${basedir}/../PCMPlayer/bin"/>
        </jar>
        <jar destfile="${destination}/${rootFolder}/scripts/Mine Scripts.zip">
            <manifest>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="assets" includes="Mine/scripts/**"/>
        </jar>
        <jar destfile="${destination}/${rootFolder}/scripts/Mine Resources.zip">
            <manifest>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="${basedir}/../mine-assets/assets" includes="Mine/images/**"/>
            <fileset dir="${basedir}/../mine-assets/assets" includes="Mine/sounds/**"/>
            <fileset dir="${basedir}/../mine-assets/assets" includes="Mine/accessories/**"/>
        	<fileset dir="${basedir}/assets" includes="Mine/*" excludes="Mine/debug.txt"/>
        </jar>
    	<!-- TODO Buid dir with prerecorded voices and Actor voices.properties-->
        <jar destfile="${destination}/${rootFolder}/scripts/Mine Mistress.zip">
            <manifest>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="${basedir}/../mine-assets/assets" includes="Mine/mistress/**"/>
        </jar>
    	<copy file="src/Mine.groovy" tofile="${destination}/${rootFolder}/scripts/Mine.groovy"/>
    </target>
</project>
